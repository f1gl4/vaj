import { useEffect, useState } from 'react';
import axios from 'axios';
import { Link, useLocation } from 'react-router-dom';
import { List, ListItemButton, ListItemText, Typography, Button, Stack } from '@mui/material';

export default function MalwareList() {
  const [data, setData] = useState([]);
  const location = useLocation();

  useEffect(() => {
    axios.get('/api/malware').then(res => setData(res.data));
  }, []);

  return (
    <>
      <Typography variant="h4" gutterBottom>Malware list</Typography>

      <Stack direction="row" sx={{mb:2}}>
        <Button variant="contained"
                color="secondary"
                component={Link}
                to="/malware/create"
        >
          Add malware
        </Button>
      </Stack>

      <List>
        {data.map(m => (
          <ListItemButton key={m.id} component={Link} to={`/malware/${m.id}`}>
            <ListItemText primary={`${m.name} (${m.type})`} 
                          secondary={`Severity: ${m.severity}`} />
          </ListItemButton>
        ))}
      </List>
    </>
  );
}
